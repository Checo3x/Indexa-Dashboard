<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gesti√≥n de Carteras</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Transiciones suaves para elementos que se muestran u ocultan */
        .fade-transition {
            transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
        }

        .fade-hidden {
            opacity: 0;
            visibility: hidden;
        }

        .fade-visible {
            opacity: 1;
            visibility: visible;
        }

        /* Transiciones de altura para secciones expandibles */
        .height-transition {
            transition: max-height 0.5s ease-in-out, opacity 0.3s ease-in-out;
            overflow: hidden;
        }

        .height-hidden {
            max-height: 0;
            opacity: 0;
        }

        .height-visible {
            max-height: 1000px; /* Ajusta seg√∫n el contenido, o usa un valor din√°mico */
            opacity: 1;
        }

        /* Asegurar que el indicador de carga tenga una transici√≥n suave */
        #loading-indicator {
            transition: opacity 0.3s ease-in-out;
        }

        /* Ajustar el tama√±o de los gr√°ficos */
        #portfolio-chart, #components-chart {
            max-width: 800px; /* Reducir el ancho m√°ximo */
            max-height: 400px; /* Reducir la altura m√°xima */
            width: 100%;
            height: auto;
        }

        /* Asegurar que el contenedor est√© centrado */
        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            max-width: 1200px; /* Limitar el ancho del contenedor */
        }

        /* Estilo para el bot√≥n de visibilidad del token */
        .toggle-password {
            cursor: pointer;
            margin-left: 8px;
        }
    </style>
</head>
<body class="bg-gray-100 font-sans">
    <div class="container mx-auto p-6">
        <h1 class="text-3xl font-bold mb-6 text-center">Gesti√≥n de Carteras</h1>

        <div id="api-token-section" class="mb-6 flex flex-col items-center">
            <label for="api-token" class="block text-lg font-medium">Introduce tu token de API:</label>
            <div class="flex items-center mt-2">
                <input type="password" id="api-token" class="p-2 border rounded w-full max-w-md" placeholder="Token de API">
                <span id="toggle-password" class="toggle-password">üëÅÔ∏è</span>
            </div>
            <button id="fetch-accounts" class="mt-2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">Cargar Cuentas</button>
        </div>

        <div id="loading-indicator" class="fade-hidden flex items-center justify-center my-4">
            <svg class="animate-spin h-8 w-8 text-blue-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"></path>
            </svg>
        </div>

        <div id="error-message" class="fade-hidden fade-transition p-4 mb-4 text-red-700 bg-red-100 rounded mx-auto max-w-4xl"></div>
        <div id="warning-message" class="fade-hidden fade-transition p-4 mb-4 text-yellow-700 bg-yellow-100 rounded mx-auto max-w-4xl"></div>

        <div id="account-selector" class="fade-hidden fade-transition mt-4 flex flex-col items-center">
            <label for="account-select" class="block text-lg font-medium">Selecciona una cuenta:</label>
            <select id="account-select" class="mt-2 p-2 border rounded w-full max-w-md">
                <option value="">Selecciona una cuenta para cargar los datos</option>
            </select>
        </div>

        <div id="account-info" class="fade-hidden fade-transition mt-6 p-4 bg-gray-100 rounded mx-auto max-w-4xl">
            <h2 class="text-xl font-semibold mb-4 text-center">Informaci√≥n de la Cuenta</h2>
            <p><strong>Cuenta seleccionada:</strong> <span id="selected-account"></span></p>
            <p><strong>Valor Total:</strong> <span id="total-value">‚Ç¨0.00</span></p>
            <p><strong>Rentabilidad Anual:</strong> <span id="annual-return">0.00%</span></p>
            <p><strong>Volatilidad:</strong> <span id="volatility">0.00%</span></p>
            <p><strong>Dinero Adicional Necesario:</strong> <span id="additional-cash-needed">‚Ç¨0.00</span></p>
        </div>

        <div class="mt-6 flex justify-center">
            <button id="toggle-charts" class="px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600">Ocultar Gr√°ficos</button>
            <button id="toggle-composition" class="ml-2 px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600">Mostrar Composici√≥n</button>
            <button id="toggle-history" class="ml-2 px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600">Mostrar Hist√≥rico</button>
        </div>

        <div id="portfolio-chart-section" class="height-hidden height-transition mt-6 flex justify-center">
            <div class="w-full max-w-4xl">
                <h2 class="text-xl font-semibold mb-4 text-center">Evoluci√≥n de la Cartera</h2>
                <canvas id="portfolio-chart"></canvas>
            </div>
        </div>

        <div id="components-chart-section" class="height-hidden height-transition mt-6 flex justify-center">
            <div class="w-full max-w-4xl">
                <h2 class="text-xl font-semibold mb-4 text-center">Evoluci√≥n de Componentes</h2>
                <canvas id="components-chart"></canvas>
            </div>
        </div>

        <div id="composition-section" class="height-hidden height-transition mt-6 flex justify-center">
            <div class="w-full max-w-4xl">
                <h2 class="text-xl font-semibold mb-4 text-center">Composici√≥n de la Cartera</h2>
                <table class="w-full border-collapse">
                    <thead>
                        <tr class="bg-gray-200">
                            <th class="p-2 text-left">Color</th>
                            <th class="p-2 text-left">Fondo</th>
                            <th class="p-2 text-left">Valor (‚Ç¨)</th>
                            <th class="p-2 text-left">Peso (%)</th>
                        </tr>
                    </thead>
                    <tbody id="composition-table"></tbody>
                </table>
            </div>
        </div>

        <div id="history-section" class="height-hidden height-transition mt-6 flex justify-center">
            <div class="w-full max-w-4xl">
                <h2 class="text-xl font-semibold mb-4 text-center">Hist√≥rico de Rentabilidad</h2>
                <table class="w-full border-collapse">
                    <thead>
                        <tr class="bg-gray-200">
                            <th class="p-2 text-left">Fecha</th>
                            <th class="p-2 text-left">Valor (‚Ç¨)</th>
                            <th class="p-2 text-left">Rentabilidad (%)</th>
                        </tr>
                    </thead>
                    <tbody id="history-table"></tbody>
                </table>
            </div>
        </div>
    </div>
    <script src="/script.js"></script>
</body>
</html>
